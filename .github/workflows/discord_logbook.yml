name: Discord Logbook

on:
  push:
  pull_request:
    types: [opened]

jobs:
  discord-notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      # 1. This runs ONLY for PUSHES
      - name: Discord Notification (Push)
        if: github.event_name == 'push'
        uses: ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            **${{ github.actor }}** pushed to branch `${{ github.ref_name }}`
            ```
            ${{ github.event.head_commit.message }}
            ```

      # 2. This runs ONLY for NEW PULL REQUESTS
      - name: Discord Notification (PR)
        if: github.event_name == 'pull_request'
        uses: ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            **${{ github.actor }}** opened a new Pull Request!
            **Title:** ${{ github.event.pull_request.title }}
            **Link:** ${{ github.event.pull_request.html_url }}